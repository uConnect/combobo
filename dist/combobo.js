!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.Combobo=e():t.Combobo=e()}("undefined"!=typeof self?self:this,function(){return function(t){var e={};function n(i){if(e[i])return e[i].exports;var s=e[i]={i:i,l:!1,exports:{}};return t[i].call(s.exports,s,s.exports,n),s.l=!0,s.exports}return n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:i})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=3)}([function(t,e,n){"use strict";t.exports=o;var i=n(4),s=n(5),r=Array.prototype;function o(t){if(!(this instanceof o))return new o(t);var e,n=s(t.className).split(/\s+/);for(this._elem=t,this.length=0,e=0;e<n.length;e+=1)n[e]&&r.push.call(this,n[e])}o.prototype.add=function(){var t,e;for(e=0;e<arguments.length;e+=1)t=""+arguments[e],i(this,t)>=0||r.push.call(this,t);return this._elem.className=this.toString(),this},o.prototype.remove=function(){var t,e,n;for(n=0;n<arguments.length;n+=1)e=""+arguments[n],(t=i(this,e))<0||r.splice.call(this,t,1);return this._elem.className=this.toString(),this},o.prototype.contains=function(t){return i(this,t+="")>=0},o.prototype.toggle=function(t,e){return t+="",!0===e?this.add(t):!1===e?this.remove(t):this[this.contains(t)?"remove":"add"](t)},o.prototype.toString=function(){return r.join.call(this," ")}},function(t,e,n){"use strict";t.exports=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8;var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";var i=n+"0123456789";var s=n.charAt(Math.floor(Math.random()*n.length));for(var r=1;r<e;r++)s+=i.charAt(Math.floor(Math.random()*i.length));if(document.getElementById(s))return t(e);return s}},function(t,e,n){"use strict";var i=n(23);function s(t,e){for(var n in e)r(e,n)&&(t[n]=e[n])}function r(t,e){return Object.prototype.hasOwnProperty.call(t,e)}t.exports=function(t){i(t)||(t={});for(var e=arguments.length,n=1;n<e;n++){var r=arguments[n];i(r)&&s(t,r)}return t}},function(t,e,n){"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=w(n(0)),o=w(n(6)),l=w(n(7)),a=w(n(8)),u=w(n(9)),c=w(n(10)),h=w(n(11)),d=w(n(13)),f=w(n(15)),p=w(n(16)),v=w(n(18)),g=w(n(19)),m=w(n(20)),b=w(n(21)),y=w(n(22)),O=w(n(24)),E=w(n(1)),x=w(n(2));function w(t){return t&&t.__esModule?t:{default:t}}function k(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}t.exports=function(){function t(e){var n=this;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),(0,o.default)(this),e=e||{},this.config=(0,y.default)(e),this.isOpen=!1,this.currentOption=null,this.currentOpts=[],this.cachedOpts=[],this.selectElm=null,this.selected=[],this.input=null,this.groups=[],this.isHovering=!1,this.autoFilter=this.config.autoFilter,this.optionsWithEventHandlers=new Set,this.optionsWithKeyEventHandlers=new Set,this.toggleButton=null,this.disabled=this.config.disabled,this.list,!this.config.internalCall){var i={},s=(0,p.default)(this.config.select,!0),r=(0,p.default)(this.config.input,!0);if(r&&r.length&&!this.config.select.startsWith("#")&&r.forEach(function(e){var s=Object.assign({},n.config);if(n.config.selectOnly&&(s.filter="starts-with",s.autoFilter=!1,"input"===e.tagName.toLowerCase())){s.inputElm=e;var r=document.createElement("div");[].concat(k(e.attributes)).forEach(function(t){["type","value"].includes(t.name)||r.setAttribute(t.name,t.value)}),s.inputElm.style.display="none",s.inputElm.insertAdjacentElement("afterend",r),r.setAttribute("tabindex","0"),r.id=e.id+"-combobo",n.reassignLabel(e,r),e=r}e.id=e.id||(0,E.default)(),s.input=e,s.internalCall=!0,i[e.id]=new t(s)}),s&&s.length&&!this.config.input.startsWith("#")&&s.forEach(function(e){e.id=e.id||(0,E.default)();var s=document.getElementById(e.id+"-combobo");s&&s.remove();var r=n.transformSelectElement(e);e.parentNode.insertBefore(r.comboElement,e.nextSibling);var o=Object.assign({},n.config);o.input=r.input,o.select=e,o.multiselect=e.multiple,o.internalCall=!0,e.style.display="none",o.placeholderText=e.getAttribute("placeholder")||o.placeholderText,i[e.id]=new t(o)}),Object.keys(i).length)return 1==Object.keys(i).length?i[Object.keys(i)[0]]:i}if(this.input=(0,p.default)(this.config.input),this.selectElm=(0,p.default)(this.config.select),this.toggleButtonIcon=this.config.toggleButtonIcon,this.input&&this.input.parentNode&&(this.list=(0,p.default)(this.config.list,!1,this.input.parentNode),this.toggleButton=(0,p.default)(this.config.toggleButton,!1,this.input.parentNode),this.config.toggleButtonIcon&&(this.toggleButton.innerHTML=this.config.toggleButtonIcon)),this.config.multiselect&&this.input.classList.add("multiselect"),!this.input||!this.list)throw new Error("Unable to find required elements (list/input)");if(this.config.source&&Array.isArray(this.config.source)){for(this.emptyDropdownList();this.list.hasChildNodes();)this.list.removeChild(this.list.firstChild);this.currentOpts=[],this.config.source.forEach(function(t){if(t.label&&t.options){var e={label:t.label,className:t.className,option:t.options};n.addOptGroup(e)}else n.addOption(t)}),this.cachedOpts=this.currentOpts}else this.cachedOpts=this.currentOpts=(0,p.default)(this.config.options,!0,this.list);if(this.config.placeholderText&&this.addPlaceholder(),this.config.groups){var a=(0,p.default)(this.config.groups,!0,this.list);this.groups=a.map(function(t){return{element:t,options:n.cachedOpts.filter(function(e){return t.contains(e)})}})}(0,m.default)(this.input,this.list,this.cachedOpts),this.config.useLiveRegion&&(this.liveRegion=new l.default({ariaLive:"assertive"})),this.initEvents(),(this.config.disabled||this.selectElm&&this.selectElm.disabled)&&this.disable();var u=!0,c=!1,h=void 0;try{for(var d,f=this.currentOpts[Symbol.iterator]();!(u=(d=f.next()).done);u=!0){var v=d.value;v.classList.contains(this.config.selectedClass)&&(this.currentOption=v,this.select())}}catch(t){c=!0,h=t}finally{try{!u&&f.return&&f.return()}finally{if(c)throw h}}}return s(t,[{key:"reassignLabel",value:function(t,e){var n=e.id,i=t.labels[0]||(t.previousElementSibling&&"label"===t.previousElementSibling.tagName.toLowerCase()?t.previousElementSibling:void 0);if(i){i.htmlFor=n;var s=i.id||(0,E.default)();i.id||(i.id=s),e.setAttribute("aria-labelledby",s)}}},{key:"initEvents",value:function(){var t=this;return!this.optionsWithKeyEventHandlers.has(this.input)&&this.config.internalCall&&(this.addEvent("click",this.input,this.handleInputClick),this.addEvent("blur",this.input,this.handleInputBlur),this.addEvent("focus",this.input,this.handleInputFocus),this.toggleButton&&(this.addEvent("click",this.toggleButton,this.handleToggleButtonClick),this.addEvent("mouseover",this.toggleButton,this.setHovering),this.addEvent("mouseout",this.toggleButton,this.setNotHovering)),document.addEventListener("click",function(e){!(0,f.default)(e.target,[t.input,t.list,t.toggleButton],!0)&&t.isOpen&&t.closeList()}),this.optionsWithKeyEventHandlers.add(this.input)),this.optionEvents(),this.initKeys(),this}},{key:"addEvent",value:function(t,e){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};e&&e.addEventListener(t,function(){for(var t=arguments.length,e=Array(t),s=0;s<t;s++)e[s]=arguments[s];n.eventWrapper.apply(n,[i].concat(e))})}},{key:"eventWrapper",value:function(t){if(!this.disabled){for(var e=arguments.length,n=Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return t.bind(this).apply(void 0,n)}}},{key:"setHovering",value:function(){this.isHovering=!0}},{key:"setNotHovering",value:function(){this.isHovering=!1}},{key:"handleToggleButtonClick",value:function(t){this.disabled||(t.stopPropagation(),this.isOpen?this.closeList():this.openList().input.focus())}},{key:"handleInputClick",value:function(){this.disabled||this.openList().goTo(this.getOptIndex()||0)}},{key:"handleInputBlur",value:function(){this.isHovering||this.closeList()}},{key:"handleInputFocus",value:function(){this.disabled||(this.selected.length&&(this.input.value=this.selected.length>=2?"":this.config.selectionValue(this.selected)),this.config.selectOnly||this.input.select())}},{key:"getOptIndex",value:function(){return this.currentOption&&this.currentOpts.indexOf(this.currentOption)}},{key:"optionEvents",value:function(){var t=this;return this.cachedOpts.forEach(function(e){t.addEventsToOptionEl(e)}),this}},{key:"addEventsToOptionEl",value:function(t){this.config.internalCall&&(this.optionsWithEventHandlers.has(t.id)||this.selected.includes(t)||(t.addEventListener("click",this.handleOptionClick.bind(this,t)),t.addEventListener("mouseover",this.handleOptionMouseOver.bind(this,t)),t.addEventListener("mouseout",this.handleOptionMouseOut.bind(this,t)),this.optionsWithEventHandlers.add(t.id)))}},{key:"handleOptionClick",value:function(t){this.goTo(this.currentOpts.indexOf(t)).select()}},{key:"handleOptionMouseOver",value:function(t){var e=this.currentOption;e&&e.classList.remove(this.config.activeClass),t.classList.add(this.config.activeClass),this.isHovering=!0}},{key:"handleOptionMouseOut",value:function(t){t.classList.remove(this.config.activeClass),this.isHovering=!1}},{key:"openList",value:function(){(0,r.default)(this.list).add(this.config.openClass),this.input.setAttribute("aria-expanded","true"),this.isOpen||this.announceCount(),this.isOpen=!0,this.emit("list:open");var t=(0,c.default)(this.list);if(!t.visible){var e="bottom"===t.position?0-(window.innerHeight-(this.input.clientHeight+this.list.clientHeight)):0;(0,a.default)({element:this.input,offset:e,bezier:[.19,1,.22,1],duration:100})}return this}},{key:"closeList",value:function(t,e){return(0,r.default)(this.list).remove(this.config.openClass),this.input.setAttribute("aria-expanded","false"),this.isOpen=!1,t&&this.input.focus(),!this.multiselect&&this.selected.length&&(this.input.value=this.config.selectionValue(this.selected)),e&&!this.config.selectOnly&&this.input.select(),this.emit("list:close"),this}},{key:"getSearchString",value:function(t){var e=this;return t?("number"==typeof this.searchTimeout&&window.clearTimeout(this.searchTimeout),this.searchTimeout=window.setTimeout(function(){e.searchString=""},this.config.selectSearchTimeout),this.searchString=this.searchString?this.searchString+t:t,this.searchString.toLowerCase()):this.searchString}},{key:"initKeys",value:function(){var t=this;if(!this.optionsWithKeyEventHandlers.has(this.input)){this.optionsWithKeyEventHandlers.add(this.input),d.default.down(this.input,[{keys:["up","down"],callback:function(e,n){if(t.isOpen)return-1===t.currentOpts.indexOf(t.currentOption)?t.goTo(0,!0):t.goTo("down"===n?"next":"prev",!0);var i=t.selected.length?t.currentOpts.indexOf(t.selected[t.selected.length-1]):0;t.goTo(i,!0).openList()},preventDefault:!0},{keys:["enter"],callback:function(){t.isOpen?t.select():t.openList()}},{keys:["escape"],callback:function(e){t.isOpen&&(e.stopPropagation(),t.closeList(!0,!0))}},{keys:["backspace"],callback:function(){t.selected.length>=2&&(t.input.value="")}}]),d.default.down(window,function(e){" "===e.key&&e.target===t.input&&(t.config.selectOnly&&(e.preventDefault(),e.stopPropagation()),t.isOpen||t.openList())}),d.default.down(this.input,function(e){var n=e.key,i=e.metaKey,s=e.ctrlKey,r=e.altKey;if(!(i||s||r)&&n&&[" ","tab","backspace"].includes(n.toLowerCase())&&t.isOpen){if(!t.config.selectOnly&&"backspace"===n.toLowerCase())return;e.preventDefault(),e.stopPropagation(),t.select(),t.closeList()}}),this.config.selectOnly&&(d.default.up(this.input,function(e){var n=e.key,i=e.altKey,s=e.ctrlKey,r=e.metaKey;if(new Array(26).fill(1).map(function(t,e){return String.fromCharCode("a".charCodeAt(0)+e)}).includes(n)&&" "!==n&&!i&&!s&&!r){e.preventDefault(),e.stopPropagation();var o=t.getSearchString(n);t.isOpen||t.openList();var l=t.searchIndex(o);l>-1&&t.goTo(l)}}),this.input.addEventListener("blur",function(){t.searchString="",t.selected.length&&(t.input.innerText=t.config.selectionValue(t.selected))}));var e=[9,13,27,16];d.default.up(this.input,function(n){if(t.autoFilter){var i=t.config.filter,s=t.cachedInputValue;e.indexOf(n.which)>-1||!i||"div"===t.input.tagName.toLowerCase()||(t.freshSelection?(t.clearFilters(),s&&s.trim()!==t.input.value.trim()&&(t.filter().openList(),t.freshSelection=!1)):t.filter().openList(),(0,g.default)(t.list,t.currentOpts,t.config.noResultsText))}})}}},{key:"searchIndex",value:function(t){var e=this.getOptIndex(),n=t.trim(),i=n[0],s=n===i.repeat(n.length)&&n.length>1,r=this.currentOpts.filter(function(t){return t.textContent.toLowerCase().startsWith(s?i:n)});if(0===r.length)return-1;if(1===r.length)return this.currentOpts.indexOf(r[0]);if(-1===e)return this.currentOpts.indexOf(r[0]);var o=r.indexOf(this.currentOption);return s&&r.length>1?this.currentOpts.indexOf(r[o+1]||r[0]):-1!==o&&o<r.length-1?this.currentOpts.indexOf(r[0]):this.currentOpts.indexOf(r[o+1]||r[0])}},{key:"clearFilters",value:function(){return this.cachedOpts.forEach(function(t){return t.style.display=""}),this.groups.forEach(function(t){return t.element.style.display=""}),this.currentOpts=this.cachedOpts,this}},{key:"filter",value:function(t,e){var n=this;e||(e=this.config.selectOnly?this.input.innerText:this.input.value);var i=this.config.filter,s=this.currentOpts;return this.currentOpts="function"==typeof i?i(e.trim(),this.cachedOpts):h.default[i](e.trim(),this.cachedOpts),this.currentOpts=this.currentOpts||[],this.updateOpts(),s.every(function(t){return n.currentOpts.indexOf(t)>-1})||t||this.announceCount(),this}},{key:"announceCount",value:function(){var t=this.config.announcement&&this.config.announcement.count;return t&&this.liveRegion&&this.liveRegion.announce(t(this.currentOpts.length),500),this}},{key:"updateOpts",value:function(){var t=this,e=this.config.optionValue;return this.cachedOpts.forEach(function(n){n.style.display=-1===t.currentOpts.indexOf(n)?"none":"",n.innerHTML="string"==typeof e?(0,b.default)(n,"div"===t.input.tagName.toLowerCase()?t.getSearchString():t.input.value,e):e(n)}),this.updateGroups(),this}},{key:"updateGroups",value:function(){return this.groups.forEach(function(t){var e=t.options.filter(function(t){return""===t.style.display});t.element.style.display=e.length?"":"none"}),this}},{key:"select",value:function(){var t=this,e=this.currentOption;if(e){var n=this.selected.indexOf(e),i=n>-1,s=i?this.config.onDeselection:this.config.onSelection;if(!this.config.multiselect&&this.selected.length&&(0,r.default)(this.selected[0]).remove(this.config.selectedClass),this.config.multiselect?i?this.selected.splice(n,1):this.selected.push(e):this.selected=this.config.allowEmpty&&i&&!this.config.selectOnly?[]:[e],s&&"function"==typeof s)if(!1===s({currentOpt:e,selected:this.selected,instance:this}))return this;var o=this.selected.length?this.config.selectionValue(this.selected):"";if(i?(e.classList.remove(this.config.selectedClass),this.emit("deselection",{value:e.dataset.value,label:o,text:o,option:e})):(e.classList.add(this.config.selectedClass),this.emit("selection",{value:e.dataset.value,label:o,text:o,option:e})),this.currentOpts.forEach(function(e){t.selected.includes(e)?(e.classList.add(t.config.selectedClass),e.setAttribute("aria-selected","true")):(e.classList.remove(t.config.selectedClass),e.setAttribute("aria-selected","false"))}),this.freshSelection=!0,this.config.selectOnly?(this.input.innerText=o,this.config.inputElm&&(this.config.inputElm.value=o)):this.input.value=o,this.cachedInputValue=o,this.filter(!0).clearFilters(),this.config.multiselect||(this.closeList(),this.config.selectOnly||this.input.select()),this.selectElm){var l=this.value(),a=!0,u=!1,c=void 0;try{for(var h,d=this.selectElm.options[Symbol.iterator]();!(a=(h=d.next()).done);a=!0){var f=h.value;this.config.multiselect?f.selected=-1!==l.indexOf(f.value):f.selected=f.value===l}}catch(t){u=!0,c=t}finally{try{!a&&d.return&&d.return()}finally{if(u)throw c}}}return this}}},{key:"reset",value:function(){var t=this;return this.clearFilters(),this.input["input"===this.input.tagName.toLowerCase()?"value":"innerText"]="",this.updateOpts(),this.input.removeAttribute("aria-activedescendant"),this.input.removeAttribute("data-active-option"),this.currentOption=null,this.selected=[],this.cachedOpts.forEach(function(e){(0,r.default)(e).remove(t.config.selectedClass),(0,r.default)(e).remove(t.config.activeClass),e.setAttribute("aria-selected","false")}),this.searchString="",this}},{key:"goTo",value:function(t,e){var n=this;if("string"==typeof t){var i=this.getOptIndex();return this.goTo("next"===t?i+1:i-1,e)}var s=this.currentOpts[t],r=!1;if(!this.currentOpts[t])return 0===this.getOptIndex()&&(this.list.scrollTop=0),this;if(this.groups.length){var o=(0,v.default)(this.groups,s);r=o&&o!==this.currentGroup,this.currentGroup=o}return this.currentOption=s,this.pseudoFocus(r),this.currentOpts.filter(Boolean).forEach(function(t){t.classList.contains(n.config.activeClass)&&!(0,u.default)(n.list,t)&&(0,a.default)(t)}),this}},{key:"pseudoFocus",value:function(t){var e=this.currentOption,n=this.config.activeClass,i=this.input?this.input.getAttribute("data-active-option"):null,s=i&&document.getElementById(i);return s&&n&&(0,r.default)(s).remove(n),e&&(this.input&&this.input.setAttribute("data-active-option",e.id),n&&(0,r.default)(e).add(n),this.liveRegion&&(0,O.default)(e,this.config,this.liveRegion.announce.bind(this.liveRegion),t,this.currentGroup&&this.currentGroup.element),this.input&&this.input.setAttribute("aria-activedescendant",e.id),this.currentOption=e,this.addEventListener&&this.emit("change")),this}},{key:"setOptions",value:function(t){return"object"===(void 0===t?"undefined":i(t))&&this.config.list.append(t),this.cachedOpts.push(t),-1===this.currentOpts.indexOf(t)&&this.currentOpts.push(t),this}},{key:"clearOptions",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(e=(0,x.default)({usePlaceholder:!0},e),this.emptyDropdownList().reset(),this.list)&&Array.from(this.list.childNodes).forEach(function(e){t.list.removeChild(e)});this.selectElm&&Array.from(this.selectElm.childNodes).forEach(function(e){t.selectElm.removeChild(e)});return this.currentOpts=[],this.cachedOpts=[],this.groups=[],(this.config.placeholderText||e.placeholder)&&e.usePlaceholder&&this.addPlaceholder({label:this.config.placeholderText||e.placeholder}),this}},{key:"addPlaceholder",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=(0,x.default)({label:this.config.placeholderText,value:"",disabled:!0,selected:!0},t);return e.label&&this.addOption(e,"top"),this}},{key:"addOptions",value:function(t){var e=this;return Array.isArray(t)&&t.length>0&&t.forEach(function(t){t.label&&t.options?e.addOptGroup(t):e.addOption(t)}),this}},{key:"addOptGroup",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.label,n=t.className,i=t.dataset,s=t.options,r=this,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"bottom",l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(this.selectElm){var a=document.createElement("optgroup");a.label=e,a.dataset=i,a.classList.add(n),s.forEach(function(t){var e=document.createElement("option");e.value=t.value,e.selected=t.selected,e.disabled=t.disabled,t.dataset&&Object.keys(t.dataset).forEach(function(n){e.dataset[n]=t.dataset[n]}),e.innerHTML=t.label,e.classList.add(t.className),a.appendChild(e)}),"top"===o?this.selectElm.prepend(a):this.selectElm.append(a)}var u=l||this.list;if(u){var c=this.createOptgroupElement(e,n),h=[];return s.forEach(function(t){var e=r.createOptionElement(t);c.appendChild(e),h.push(e),r.cachedOpts.push(e),r.currentOpts.push(e)}),"top"===o?u.prepend(c):u.append(c),this.groups.push({label:e,element:c,options:h}),c}}},{key:"addOption",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.label,n=t.text,i=t.value,s=t.selected,r=void 0!==s&&s,o=t.disabled,l=void 0!==o&&o,a=t.dataset,u=t.className,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"bottom",h=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,d=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(!e)return this;if(this.selectElm){var f=document.createElement("option");f.value=i,f.selected=r,f.disabled=l,f.innerHTML=e||n,f.classList.add(u),a&&Object.keys(a).forEach(function(t){f.dataset[t]=a[t]}),"top"===c?this.selectElm.prepend(f):this.selectElm.append(f)}var p=this.createOptionElement({label:e||n,value:i,selected:r,disabled:l,dataset:a,className:u}),v=h||this.list;return v?("top"===c?(v.prepend(p),this.cachedOpts.unshift(p),this.currentOpts.unshift(p)):(v.append(p),this.cachedOpts.push(p),this.currentOpts.push(p)),d&&(this.addEventsToOptionEl(p),r&&this.config.internalCall&&this.goTo(this.currentOpts.indexOf(p),!0).select()),this):this}},{key:"setCurrentOptions",value:function(){return this.currentOption=this.currentOpts[0],this}},{key:"updateSelectedOptions",value:function(){var t=this,e=document.getElementById(this.config.list.id),n=this.selected;for(this.emptyDropdownList();e.hasChildNodes();)e.removeChild(e.firstChild);return n.length>0&&n.forEach(function(e){t.setOptions(e)}),this}},{key:"emptyDropdownList",value:function(){return this.currentOpts=[],this.cachedOpts=[],this.optionsWithEventHandlers.clear(),this}},{key:"setNoResultFound",value:function(){(0,g.default)(this.list,this.currentOpts,this.config.noResultsText)}},{key:"value",value:function(){var t=[];return this.selected.forEach(function(e){e.hasAttribute("data-value")?t.push(e.dataset.value):t.push(e.innerText)}),this.config.multiselect?t:t&&t.length?t[0]:null}},{key:"disable",value:function(){return this.disabled=!0,this.input.setAttribute("input"===this.input.tagName.toLowerCase()?"disabled":"aria-disabled","true"),this.input.removeAttribute("tabindex"),this.toggleButton&&this.toggleButton.setAttribute("aria-disabled","true"),this.selectElm&&this.selectElm.setAttribute("disabled","disabled"),this.input.parentElement.setAttribute("aria-disabled","true"),this.input.parentElement.classList.add("disabled"),this}},{key:"enable",value:function(){return this.disabled=!1,this.input.removeAttribute("disabled"),this.input.removeAttribute("aria-disabled"),this.input.setAttribute("tabindex","0"),this.toggleButton&&this.toggleButton.removeAttribute("aria-disabled"),this.selectElm&&this.selectElm.removeAttribute("disabled"),this.input.parentElement.removeAttribute("aria-disabled"),this.input.parentElement.classList.remove("disabled"),this.initEvents(),this}},{key:"transformSelectElement",value:function(t){var e=this,n=t.className,i=document.createElement("div");i.className=[this.config.wrapClass,n].filter(Boolean).join(" "),i.id=t.id+"-combobo",t.hasAttribute("placeholder")&&(this.config.placeholderText=t.getAttribute("placeholder")),t.multiple&&i.classList.add("multiselect");var s=this.config.selectOnly?"div":"input",r=document.createElement(s);r.setAttribute("tabindex","0"),r.type="text",r.className=this.config.inputClass,r.id=t.id+"-input",i.appendChild(r);var o=document.createElement("span");o.setAttribute("aria-hidden","true"),o.className=this.config.toggleButtonClass,i.appendChild(o);var l=document.createElement("div");l.className=this.config.listClass,i.appendChild(l);var a=!1;return Array.from(t.children).forEach(function(t){if("optgroup"===t.tagName.toLowerCase()){a=!0;var n=t.className,i={label:t.label,className:n,dataset:t.dataset,options:[]};i.options=Array.from(t.children).map(function(t){return{label:t.textContent,value:t.value,selected:t.hasAttribute("selected"),disabled:t.hasAttribute("disabled"),dataset:t.dataset,className:t.className}}),e.addOptGroup(i,"bottom",l)}else e.addOption({label:t.textContent,value:t.value,selected:t.hasAttribute("selected"),disabled:t.hasAttribute("disabled"),dataset:t.dataset,class:t.className},"bottom",l,!1)}),this.config.placeholderText&&this.addPlaceholder(),a&&i.classList.add("has-groups"),this.reassignLabel(t,r),{comboElement:i,input:r}}},{key:"createOptionElement",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.label,n=t.text,i=t.value,s=t.selected,r=t.disabled,o=t.dataset,l=t.className,a=Object.assign({selected:!1,disabled:!1},{label:e,text:n,value:i,selected:s,disabled:r,className:l}),u=(0,E.default)(),c=document.createElement("div");return c.className=[this.config.optionsClass,a.className].filter(Boolean).join(" "),c.innerHTML=a.label||a.text,c.dataset.value=a.value,c.id=u,c.setAttribute("role","option"),c.setAttribute("aria-selected",a.selected?"true":"false"),o&&Object.keys(o).forEach(function(t){"value"!==t&&(c.dataset[t]=o[t])}),a.selected&&c.classList.add(this.config.selectedClass),a.disabled&&c.classList.add("disabled"),c}},{key:"createOptgroupElement",value:function(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=(0,E.default)(),r=document.createElement("div");(e=r.classList).add.apply(e,k([this.config.optgroupClass,n].filter(Boolean))),r.setAttribute("role","group"),r.setAttribute("aria-labelledby",s),i&&Object.keys(i).forEach(function(t){r.dataset[t]=i[t]});var o=document.createElement("div");return o.className=this.config.optgroupLabelClass,o.id=s,o.innerHTML=t,r.append(o),r}}]),t}()},function(t,e){t.exports=function(t,e){if(t.indexOf)return t.indexOf(e);for(var n=0;n<t.length;++n)if(t[n]===e)return n;return-1}},function(t,e){(e=t.exports=function(t){return t.replace(/^\s*|\s*$/g,"")}).left=function(t){return t.replace(/^\s*/,"")},e.right=function(t){return t.replace(/\s*$/,"")}},function(t,e,n){function i(t){if(t)return function(t){for(var e in i.prototype)t[e]=i.prototype[e];return t}(t)}t.exports=i,i.prototype.on=i.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this},i.prototype.once=function(t,e){function n(){this.off(t,n),e.apply(this,arguments)}return n.fn=e,this.on(t,n),this},i.prototype.off=i.prototype.removeListener=i.prototype.removeAllListeners=i.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,i=this._callbacks["$"+t];if(!i)return this;if(1==arguments.length)return delete this._callbacks["$"+t],this;for(var s=0;s<i.length;s++)if((n=i[s])===e||n.fn===e){i.splice(s,1);break}return 0===i.length&&delete this._callbacks["$"+t],this},i.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),n=this._callbacks["$"+t],i=1;i<arguments.length;i++)e[i-1]=arguments[i];if(n){i=0;for(var s=(n=n.slice(0)).length;i<s;++i)n[i].apply(this,e)}return this},i.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]},i.prototype.hasListeners=function(t){return!!this.listeners(t).length}},function(t,e,n){"use strict";function i(t){this.region=document.createElement("div"),this.options=t||{},this.configure(),document.body.appendChild(this.region)}i.prototype.configure=function(){var t=this.options,e=this.region;e.setAttribute("aria-live",t.ariaLive||"polite"),e.setAttribute("role",t.role||"log"),e.setAttribute("aria-relevant",t.ariaRelevant||"additions"),e.setAttribute("aria-atomic",t.ariaAtomic||"false"),this.region.style.position="absolute",this.region.style.width="1px",this.region.style.height="1px",this.region.style.marginTop="-1px",this.region.style.clip="rect(1px, 1px, 1px, 1px)",this.region.style.overflow="hidden"},i.prototype.announce=function(t,e){var n=document.createElement("div");n.innerHTML=t,this.region.appendChild(n),(e||void 0===e)&&setTimeout(function(){this.region.removeChild(n)}.bind(this),e||7e3)},i.prototype.destroy=function(){this.region.parentNode.removeChild(this.region)},t.exports=i},function(t,e,n){!function(e,n){t.exports=n()}(0,function(){return function(t){function e(i){if(n[i])return n[i].exports;var s=n[i]={i:i,l:!1,exports:{}};return t[i].call(s.exports,s,s.exports,e),s.l=!0,s.exports}var n={};return e.m=t,e.c=n,e.i=function(t){return t},e.d=function(t,n,i){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:i})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=1)}([function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function s(){}Object.defineProperty(e,"__esModule",{value:!0});var r=i(n(4)),o=i(n(7)),l=n(2),a=i(n(3)),u=[.19,1,.22,1];e.default=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,n=0,i=void 0,c=void 0;if((0,l.isElement)(t))i=r.default.apply(void 0,u),c=s;else{if(!(0,l.isObject)(t))throw new TypeError("The first argument must be HTMLElement or Object.");if(!(0,l.isElement)(t.element))throw new TypeError("`element` must be HTMLElement.");n=(0,l.isNumeric)(t.offset)?t.offset:0,i=(0,l.isArray)(t.bezier)&&4===t.bezier.length?r.default.apply(void 0,function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}(t.bezier)):r.default.apply(void 0,u),e=t.duration,c=(0,l.isFunction)(t.then)?t.then:s,t=t.element}(!(0,l.isNumeric)(e)||e<0)&&(e=100);var h=(0,a.default)(t),d=h.scrollTop,f=h.offsetTop,p=null,v=("BODY"===h.nodeName?t.getBoundingClientRect().top+(window.scrollY||window.pageYOffset||document.body.scrollTop)-f:t.offsetTop-f)-d+n;(0,o.default)(function t(n){null===p&&(p=n);var s=n-p,r=i(s/e)*v;h.scrollTop=Math.round(d+r),s<e?(0,o.default)(t):c()})}},function(t,e,n){"use strict";var i=function(t){return t&&t.__esModule?t:{default:t}}(n(0));t.exports=i.default},function(t,e,n){"use strict";function i(t){return Object.prototype.toString.call(t)}function s(t){return!isNaN(parseFloat(t))&&isFinite(t)}Object.defineProperty(e,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.isObject=function(t){return"[object Object]"===i(t)},e.isArray=function(t){return null!=t&&"[object Array]"===i(t)},e.isNumeric=s,e.isPositive=function(t){return s(t)&&t>=0},e.isFunction=function(t){return null!=t&&"[object Function]"===i(t)},e.isElement=function(t){return"object"===r(window.HTMLElement)?t instanceof window.HTMLElement:!!t&&"object"===(void 0===t?"undefined":r(t))&&null!==t&&1===t.nodeType&&"string"==typeof t.nodeName}},function(t,e,n){"use strict";function i(t,e){return window.getComputedStyle(t,null).getPropertyValue(e)}function s(t){if(1===t.nodeType)return r.test(function(t){return i(t,"overflow")+i(t,"overflow-y")}(t))&&t.scrollHeight>t.clientHeight}Object.defineProperty(e,"__esModule",{value:!0});var r=/(auto|scroll)/;e.default=function(t){for(var e=function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=e.parentNode;return null===i||"HTML"===i.nodeName?n:t(i,n.concat(i))}(t),n=document.body,i=0,r=e.length;i<r;i++)if(s(e[i])){n=e[i];break}return n}},function(t,e){function n(t,e){return 1-3*e+3*t}function i(t,e){return 3*e-6*t}function s(t){return 3*t}function r(t,e,r){return((n(e,r)*t+i(e,r))*t+s(e))*t}function o(t,e,r){return 3*n(e,r)*t*t+2*i(e,r)*t+s(e)}function l(t,e,n,i,s){var o,l,a=0;do{(o=r(l=e+(n-e)/2,i,s)-t)>0?n=l:e=l}while(Math.abs(o)>c&&++a<h);return l}function a(t,e,n,i){for(var s=0;s<u;++s){var l=o(e,n,i);if(0===l)return e;e-=(r(e,n,i)-t)/l}return e}var u=4,c=1e-7,h=10,d=11,f=1/(d-1),p="function"==typeof Float32Array;t.exports=function(t,e,n,i){function s(e){for(var i=0,s=1,r=d-1;s!==r&&u[s]<=e;++s)i+=f;var c=i+(e-u[--s])/(u[s+1]-u[s])*f,h=o(c,t,n);return h>=.001?a(e,c,t,n):0===h?c:l(e,i,i+f,t,n)}if(!(0<=t&&t<=1&&0<=n&&n<=1))throw new Error("bezier x values must be in [0, 1] range");var u=p?new Float32Array(d):new Array(d);if(t!==e||n!==i)for(var c=0;c<d;++c)u[c]=r(c*f,t,n);return function(o){return t===e&&n===i?o:0===o?0:1===o?1:r(s(o),e,i)}}},function(t,e,n){(function(e){(function(){var n,i,s,r,o,l;"undefined"!=typeof performance&&null!==performance&&performance.now?t.exports=function(){return performance.now()}:void 0!==e&&null!==e&&e.hrtime?(t.exports=function(){return(n()-o)/1e6},i=e.hrtime,r=(n=function(){var t;return 1e9*(t=i())[0]+t[1]})(),l=1e9*e.uptime(),o=r-l):Date.now?(t.exports=function(){return Date.now()-s},s=Date.now()):(t.exports=function(){return(new Date).getTime()-s},s=(new Date).getTime())}).call(this)}).call(e,n(6))},function(t,e){function n(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function s(t){if(u===setTimeout)return setTimeout(t,0);if((u===n||!u)&&setTimeout)return u=setTimeout,setTimeout(t,0);try{return u(t,0)}catch(e){try{return u.call(null,t,0)}catch(e){return u.call(this,t,0)}}}function r(){p&&d&&(p=!1,d.length?f=d.concat(f):v=-1,f.length&&o())}function o(){if(!p){var t=s(r);p=!0;for(var e=f.length;e;){for(d=f,f=[];++v<e;)d&&d[v].run();v=-1,e=f.length}d=null,p=!1,function(t){if(c===clearTimeout)return clearTimeout(t);if((c===i||!c)&&clearTimeout)return c=clearTimeout,clearTimeout(t);try{c(t)}catch(e){try{return c.call(null,t)}catch(e){return c.call(this,t)}}}(t)}}function l(t,e){this.fun=t,this.array=e}function a(){}var u,c,h=t.exports={};!function(){try{u="function"==typeof setTimeout?setTimeout:n}catch(t){u=n}try{c="function"==typeof clearTimeout?clearTimeout:i}catch(t){c=i}}();var d,f=[],p=!1,v=-1;h.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];f.push(new l(t,e)),1!==f.length||p||s(o)},l.prototype.run=function(){this.fun.apply(null,this.array)},h.title="browser",h.browser=!0,h.env={},h.argv=[],h.version="",h.versions={},h.on=a,h.addListener=a,h.once=a,h.off=a,h.removeListener=a,h.removeAllListeners=a,h.emit=a,h.binding=function(t){throw new Error("process.binding is not supported")},h.cwd=function(){return"/"},h.chdir=function(t){throw new Error("process.chdir is not supported")},h.umask=function(){return 0}},function(t,e,n){(function(e){for(var i=n(5),s="undefined"==typeof window?e:window,r=["moz","webkit"],o="AnimationFrame",l=s["request"+o],a=s["cancel"+o]||s["cancelRequest"+o],u=0;!l&&u<r.length;u++)l=s[r[u]+"Request"+o],a=s[r[u]+"Cancel"+o]||s[r[u]+"CancelRequest"+o];if(!l||!a){var c=0,h=0,d=[];l=function(t){if(0===d.length){var e=i(),n=Math.max(0,1e3/60-(e-c));c=n+e,setTimeout(function(){var t=d.slice(0);d.length=0;for(var e=0;e<t.length;e++)if(!t[e].cancelled)try{t[e].callback(c)}catch(t){setTimeout(function(){throw t},0)}},Math.round(n))}return d.push({handle:++h,callback:t,cancelled:!1}),h},a=function(t){for(var e=0;e<d.length;e++)d[e].handle===t&&(d[e].cancelled=!0)}}t.exports=function(t){return l.call(s,t)},t.exports.cancel=function(){a.apply(s,arguments)},t.exports.polyfill=function(){s.requestAnimationFrame=l,s.cancelAnimationFrame=a}}).call(e,n(8))},function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(n=window)}t.exports=n}])})},function(t,e,n){"use strict";t.exports=function(t,e){var n=t.clientHeight,i=e.clientHeight,s=t.scrollTop,r=e.offsetTop;return!(s>r)&&!(s+n-i<r)}},function(t,e,n){"use strict";t.exports=function(t){var e=window.innerHeight,n=t.getBoundingClientRect(),i=n.top<0,s=n.bottom>e,r=!i&&!s,o={visible:r};return r||(o.position=i?"top":"bottom"),o}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){return t&&t.__esModule?t:{default:t}}(n(12));e.default={contains:function(t,e){return e.filter(function(e){return(0,i.default)(e).toLowerCase().includes(t.toLowerCase())})},equals:function(t,e){return e.filter(function(e){return(0,i.default)(e).toLowerCase()===t.toLowerCase()})},"starts-with":function(t,e){return e.filter(function(e){return(0,i.default)(e).toLowerCase().startsWith(t.toLowerCase())})}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){if(t.hasAttribute("data-value"))return t.getAttribute("data-value");return t.innerText.trim()||t.textContent.trim()||""}},function(t,e,n){"use strict";var i=function(t){return t&&t.__esModule?t:{default:t}}(n(14));e.attach=function(t,e,n){if("function"==typeof n)return e.addEventListener(t,n);n&&n.length&&e.addEventListener(t,function(t){var e=i.default[t.which];n.forEach(function(n){n.keys.indexOf(e)>-1&&(n.preventDefault&&t.preventDefault(),n.callback(t,e))})})},e.up=function(t,n){return e.attach("keyup",t,n)},e.down=function(t,n){return e.attach("keydown",t,n)},e.press=function(t,n){return e.attach("keypress",t,n)}},function(t,e,n){"use strict";t.exports={8:"backspace",9:"tab",13:"enter",27:"escape",32:"space",37:"left",38:"up",39:"right",40:"down"}},function(t,e,n){"use strict";t.exports=function(t,e,n){if(e=e.length?e:[e],n&&e.indexOf(t)>-1)return!0;for(var i=t.parentNode;i&&"HTML"!==i.tagName;){if(e.indexOf(i)>-1)return!0;i=i.parentNode}return!1}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){return t&&t.__esModule?t:{default:t}}(n(17));e.default=function(t,e,n){return n=n||document,"string"==typeof t?e?i.default.queryAll(t,n):i.default.query(t,n):t}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=e.query=function(t,e){return(e=e||document).querySelector(t)},s=e.queryAll=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document;return Array.from(e.querySelectorAll(t))};e.default={query:i,queryAll:s}},function(t,e,n){"use strict";t.exports=function(t,e){var n=t.filter(function(t){return t.options.indexOf(e)>-1});return n.length&&n[0]}},function(t,e,n){"use strict";var i=function(t){return t&&t.__esModule?t:{default:t}}(n(0));t.exports=function(t,e,n){var s=t.querySelector(".combobo-no-results");!n||e.length||s?s&&e.length&&t.removeChild(s):(s=document.createElement("div"),(0,i.default)(s).add("combobo-no-results"),s.innerHTML=n,t.appendChild(s))}},function(t,e,n){"use strict";var i=function(t){return t&&t.__esModule?t:{default:t}}(n(1));t.exports=function(t,e,n){e.id=e.id||(0,i.default)(),t.setAttribute("role","combobox"),e.setAttribute("role","listbox"),t.setAttribute("aria-controls",e.id),t.setAttribute("aria-autocomplete","list"),t.setAttribute("aria-expanded","false"),n.forEach(function(t){t.setAttribute("role","option"),t.id=t.id||(0,i.default)()})}},function(t,e,n){"use strict";t.exports=function(t,e,n){e=e||"";var i=t.innerText,s=i.toLowerCase().indexOf(e.toLowerCase()),r=e.length;return e&&s>=0?i.substring(0,s)+'<span class="'+n+'">'+i.substr(s,r)+"</span>"+i.substring(s+r):i}},function(t,e,n){"use strict";var i=function(t){return t&&t.__esModule?t:{default:t}}(n(2));var s={select:"select.combobo",input:".combobox",list:".listbox",toggleButton:".trigger",options:".option",groups:null,wrapClass:"combo-wrap",inputClass:"combobox",listClass:"listbox",toggleButtonClass:"trigger",toggleButtonIcon:null,optgroupClass:"optgroup",optgroupLabelClass:"optgroup-label",optionsClass:"option",openClass:"open",activeClass:"active",selectedClass:"selected",useLiveRegion:!0,allowEmpty:!0,multiselect:!1,noResultsText:null,placeholderText:null,onSelection:void 0,onDeselection:void 0,selectionValue:function(t){return t.map(function(t){return t.innerText.trim()}).join(" - ")},optionValue:function(t){return t.innerHTML},announcement:{count:function(t){return t+" options available"},selected:"Selected."},filter:"contains",autoFilter:!0,selectOnly:!1,selectSearchTimeout:500,disabled:!1};t.exports=function(t){var e={},n={};return t.announcement=t.announcement||{},(0,i.default)(n,s.announcement,t.announcement),(0,i.default)(e,s,t),e.announcement=n,e}},function(t,e,n){"use strict";
/*!
 * is-extendable <https://github.com/jonschlinkert/is-extendable>
 *
 * Copyright (c) 2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */t.exports=function(t){return void 0!==t&&null!==t&&("object"==typeof t||"function"==typeof t)}},function(t,e,n){"use strict";t.exports=function(t,e,n,i,s){var r="true"===t.getAttribute("aria-selected"),o=e.announcement.selected,l=t.innerText;l=i&&e.announcement&&e.announcement.groupChange?e.announcement.groupChange(s)+" "+l:l,n(l=r&&o?l+" "+o:l,500)}}])});